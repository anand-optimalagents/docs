---
title: Development
---

This document will help you create, deploy, and integrate AI agents seamlessly on our platform.
Whether you're building an API, chatbot, or website-based AI, this guide will walk you through the essential steps.

## üîÑ Interface & Routes

Design your agent's interface routes following these guidelines:

1. Main Interface

   - Create a single unified interface at "/" for all user interactions
   - Keep the interface clean and intuitive
   - Put clear instructions on how to use the agent
   - Use a framework like FastAPI, Flask, or Node.js for building the interface
   - Ensure the interface is responsive and user-friendly
   - Need to use windows.href (javascript ) then add /your path name

2. API routes

   - Define routes for API interactions
   - Use RESTful principles for API design
   - Example routes:
     - `/run` - for executing agent logic
     - `/process` - for processing user input
     - `/status` - for checking agent status
     - `/uploads` - for uploading files
     - `/docs` - for API & Route documentation
   - Use appropriate HTTP methods (GET, POST, PUT, DELETE) for each route
   - Use JSON for data exchange
   - Use appropriate HTTP status codes for responses
   - Use appropriate HTTP headers for authentication and content type
   - For client-side navigation, utilize window.location.href followed by your desired route path
   - include User-Token in the request headers for all API calls to the agent

   ```javascript
   // Function to get a cookie by name
   function getCookie(name) {
     let cookies = document.cookie.split("; ");
     for (let cookie of cookies) {
       let [key, value] = cookie.split("=");
       if (key === name) {
         return decodeURIComponent(value);
       }
     }
     return null;
   }
   let accessToken = getCookie("accessToken");

   const url = window.location.href.replace(/\/+$/, "") + "/data";
   fetch(url, {
     method: "GET",
     headers: {
       "Content-Type": "application/json",
       "User-Token": `${accessToken}`,
     },
   })
     .then((response) => response.json())
     .then((data) => {
       console.log("Success:", data);
       // Handle success response
     })
     .catch((error) => {
       console.error("Error:", error);
       // Handle error response
     });
   ```

3. Documentation
   - All routes and endpoints must be documented at "/docs"
   - Use built-in documentation tools:
     - FastAPI: Built-in Swagger UI
     - Flask: Flask-RESTPlus or Flask-Swagger
     - Node.js: Swagger UI Express or similar

## üìÇ Folder Structure

To keep things organized, structure your project like this:

```
/my-agent
‚îÇ‚îÄ‚îÄ Dockerfile
‚îÇ‚îÄ‚îÄ requirements.txt (for Python projects)
‚îú‚îÄ‚îÄ main.py (entry point)
‚îÇ‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ utils.py
‚îÇ   ‚îú‚îÄ‚îÄ handlers/
‚îÇ‚îÄ‚îÄ logs/
‚îÇ   ‚îú‚îÄ‚îÄ agent.log
‚îÇ‚îÄ‚îÄ instead of .env -> use Secret Manager

```

- Zip the project folder (e.g. /my-agent ) into a `.zip` file. Ensure that the Dockerfile and all necessary files are included in the zip.
- Check the size of the zip file to ensure it is within the upload limits set by OptimalAgents.ai (typically 100MB).
- Make sure to remove unnecessary files or folders (like `.git` or `node_modules` or `virtual env` folders) to keep the upload size minimal.
- If your project exceeds this limit, consider optimizing or splitting it into smaller components.

## üåê Routes & API Endpoints

Your agent can expose API endpoints for users to interact with. Example setup in Flask:

```
from flask import Flask, request, jsonify
app = Flask(**name**)

agent_id = OS.getenv("AGENT_ID")
api_key = OS.getenv("CREATOR_API_KEY")

def check_agent_run(user_token, api_key, agent_id):
    url = "https://optimalagents.ai/check-user-credits"
    headers = {"User-Token": user_token}
    data = {"api_key": api_key, "agent_id": agent_id}
    response = requests.post(url, json=data, headers=headers)
    result = response.json()

    if result.get("status") == "allowed":
        print("Agent execution permitted.")
    else:
        print(f"Error: {result.get('message')}")


@app.route("/")
def home():
    return "Welcome to the AI Agent!"

@app.route("/docs")
def docs():
    return "API Documentation: /process"

@app.route("/run", methods=["POST"])
def run():
    ##check for user authorization and credit verification
    resp = check_agent_run(request.headers.get("User-Token"), api_key, agent_id)
    if resp.get("status") == "allowed":
        authorized = True
        enough_credits = True
    else:
        authorized = False
        enough_credits = False
    if not authorized or not enough_credits:
        return jsonify({"error": "Unauthorized or insufficient credits"}), 403
    data = request.json
    response = {"result": "Processed " + str(data)}
    return jsonify(response)

if **name** == "**main**":
    app.run(host='0.0.0.0', port=8000)
```

Ensure your routes are well-documented and secured.

## üîë Env Variables (Secrets)

Secrets are environment variables required by your agent to function which will be passed to the Docker container when the agent runs.
Store them securely in your profile's Secret manager.
These variables will be securely managed by OptimalAgents.ai and injected into the agent‚Äôs docker runtime environment.

By default, we will including **AGENT_ID**, **CREATOR_API_KEY**, **_Secrets_** as environment variables.

Examples include:

```
API_KEY=your_api_key
DB_URL=your_database_url
MODEL_NAME=gpt-4
```

Never hardcode secrets! Load them in your app like this:

```
import os
api_key = os.getenv("CREATOR_API_KEY")
```

## üîê Credit Check & Authorization

Before running, agents must verify user credits via the OptimalAgents API.

‚úÖ Credit Check API

Make a request before executing agent logic:

```
POST https://optimalagents.ai/check-user-credits
Content-Type: application/json
User-Token: <USER_TOKEN>

{
  "api_key": "<CREATOR_API_KEY>",
  "agent_id": "<AGENT_ID>"
}

```

Handling Responses

Response Examples
Success Response

```
{
"status": "allowed",
"message": "Agent execution permitted."
}
```

Error Response (Not Enough Credits)

```{
"status": "error",
"message": "Not enough credits to run the agent."
}
```

Error Response (Unauthorized Agent)

```
{
"status": "error",
"message": "Agent not allowed for this user."
}
```

## üê≥ Docker Containerization

All agents run inside Docker containers. Your Dockerfile should look like this:

```
FROM python:3.11-slim
WORKDIR /app
COPY . /app
RUN pip install -r requirements.txt
CMD ["python", "src/main.py"]
```

Steps to Build, Run & Test in Local

Build the container:

```
docker build -t my-agent .
```

Run the container:

```
docker run -p 5000:5000 my-agent
```

A Docker image will be automatically generated upon initial deployment and regenerated following any edits to the codebase.

For file uploads, kindly direct your bytes to the '/app/uploads' directory - it's where the magic happens! OptimalAgents has cleverly bound a persistent storage space to this location, ensuring your uploads don't pull a disappearing act.

üóÇÔ∏è## CORS Configuration

To enable Cross-Origin Resource Sharing (CORS) for all origins and ports in your server-side application, configure your middleware with appropriate security settings.

```
# from fastapi.middleware.cors import CORSMiddleware
# from fastapi import FastAPI
# app = FastAPI()
app.add_middleware(
    CORSMiddleware,
    allow_origins=["*"],
    allow_credentials=True,
    allow_methods=["*"],
    allow_headers=["*"],
)
```

## üìú Logging & Monitoring

Use logging for debugging and tracking agent performance.

```
import logging
logging.basicConfig(level=logging.INFO, filename='logs/agent.log')
logging.info("Agent started successfully!")
```

Always log errors and API failures for troubleshooting!

Congratulations! üéâ You now have everything needed to create and deploy AI agents on OptimalAgents.ai.
If you need help, reach out to our support team or explore our community forums! üöÄ
